(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[638],{4638:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return b}});o(8309);var r=o(6252),l=(0,r.HX)("data-v-352785b2");(0,r.dD)("data-v-352785b2");var t={class:"box"},a={class:"container"},u={class:"language"};(0,r.Cn)();var i=l((function(e,n,o,i,s,c){var d=(0,r.up)("Login"),g=(0,r.up)("el-option"),p=(0,r.up)("el-select");return(0,r.wg)(),(0,r.j4)("div",t,[(0,r.Wm)("div",a,[(0,r.Wm)(d)]),(0,r.Wm)("div",u,[(0,r.Wm)(p,{modelValue:i.language,"onUpdate:modelValue":n[1]||(n[1]=function(e){return i.language=e}),placeholder:"请选择",onChange:i.changeLanguage},{default:l((function(){return[((0,r.wg)(!0),(0,r.j4)(r.HY,null,(0,r.Ko)(i.languages,(function(e){return(0,r.wg)(),(0,r.j4)(g,{key:e.key,label:e.name,value:e.key},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])])])})),s=o(9963),c=o(3577),d=(0,r.HX)("data-v-31967cba"),g=d((function(e,n,o,l,t,a){var u=(0,r.up)("el-input"),i=(0,r.up)("el-form-item"),g=(0,r.up)("svg-icon"),p=(0,r.up)("el-button"),f=(0,r.up)("el-form");return(0,r.wg)(),(0,r.j4)(r.HY,null,[(0,r.Wm)(s.uT,{name:"rotate"},{default:d((function(){return[l.isLogin?((0,r.wg)(),(0,r.j4)("h3",{key:"login",onClick:n[1]||(n[1]=function(){return l.showOtherForm&&l.showOtherForm.apply(l,arguments)})},(0,c.zw)(e.$t("login.loginFormTitle")),1)):((0,r.wg)(),(0,r.j4)("h3",{key:"register",onClick:n[2]||(n[2]=function(){return l.showOtherForm&&l.showOtherForm.apply(l,arguments)})},(0,c.zw)(e.$t("login.registerFormTitle")),1))]})),_:1}),(0,r.Wm)(f,{ref:"refForm",class:"login-form","label-width":"90px",model:l.form,rules:l.loginRules,"hide-required-asterisk":!0},{default:d((function(){return[(0,r.Wm)(i,{label:e.$t("login.username"),prop:"username"},{default:d((function(){return[(0,r.Wm)(u,{modelValue:l.form.username,"onUpdate:modelValue":n[3]||(n[3]=function(e){return l.form.username=e}),placeholder:e.$t("login.usernamPlaceholder")},null,8,["modelValue","placeholder"])]})),_:1},8,["label"]),(0,r.Wm)(i,{label:e.$t("login.password"),prop:"password"},{default:d((function(){return[(0,r.Wm)(u,{modelValue:l.form.password,"onUpdate:modelValue":n[4]||(n[4]=function(e){return l.form.password=e}),type:l.showPassword?"text":"password",placeholder:e.$t("login.passwordPlaceholder"),onKeyup:(0,s.D2)((0,s.iM)(l.handleEnter,["stop"]),["enter"])},{suffix:d((function(){return[(0,r.Wm)(g,{class:"cp","icon-class":l.showPassword?"eye-open":"eye",onClick:l.handleShowPassword},null,8,["icon-class","onClick"])]})),_:1},8,["modelValue","type","placeholder","onKeyup"])]})),_:1},8,["label"]),(0,r.Wm)(i,{"label-width":"0"},{default:d((function(){return[l.isLogin?((0,r.wg)(),(0,r.j4)(p,{key:0,class:"skew-button",type:"primary",onClick:l.handleLogin,onKeyup:(0,s.D2)((0,s.iM)(l.handleLogin,["stop"]),["enter"])},{default:d((function(){return[(0,r.Uk)((0,c.zw)(e.$t("login.login")),1)]})),_:1},8,["onClick","onKeyup"])):((0,r.wg)(),(0,r.j4)(p,{key:1,class:"skew-button",type:"primary",onClick:l.handleRegister,onKeyup:(0,s.D2)((0,s.iM)(l.handleRegister,["stop"]),["enter"])},{default:d((function(){return[(0,r.Uk)((0,c.zw)(e.$t("login.register")),1)]})),_:1},8,["onClick","onKeyup"])),(0,r.Wm)(p,{class:"skew-button",onClick:l.handleReset},{default:d((function(){return[(0,r.Uk)((0,c.zw)(e.$t("login.reset")),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])],64)})),p=o(2262),f=o(2119),m=o(6092),h=o(894),w=(o(3644),o(127)),v={name:"Login",setup:function(){var e=(0,f.tv)(),n=(0,h.oR)(),o=(0,m.QT)(),r=o.t,l=(0,p.iH)(!0),t=function(){l.value=!l.value},a=(0,p.iH)(!1),u=function(){a.value=!a.value},i=function(e,n,o){n?o():o(new Error(r("login.usernameError")))},s=function(e,n,o){n.length<6?o(new Error(r("login.passwordError"))):o()},c=[{required:!0,trigger:"blur",validator:s}],d=(0,p.qj)({username:[{required:!0,trigger:"blur",validator:i}]}),g=(0,p.iH)(null),v=(0,p.qj)({username:"",password:""}),k=function(){d.password&&delete d.password,g.value.validate((function(o){o?n.dispatch("user/login",v).then((function(n){e.push("/home")})).catch((function(e){console.log("login error:",e)})):console.log("login error!")}))},y=function(){d.password||(d.password=c),g.value.validate((function(e){e?n.dispatch("user/register",v).then((function(e){w.z8.success({message:e.message,showClose:!0})})).catch((function(e){console.log("err:",e)})):console.log("register error!")}))},b=function(){g.value.resetFields()},C=function(){l.value?k():y()};return{form:v,loginRules:d,isLogin:l,showPassword:a,handleLogin:k,handleRegister:y,handleReset:b,handleEnter:C,showOtherForm:t,handleShowPassword:u,refForm:g}}};v.render=g,v.__scopeId="data-v-31967cba";var k=v,y={components:{Login:k},setup:function(){var e=(0,h.oR)(),n=(0,r.Fl)((function(){return e.getters.languages})),o=(0,p.iH)("");o.value=e.getters.i18n;var l=function(n){o.value=n,e.dispatch("app/changeI18n",n)};return{languages:n,language:o,changeLanguage:l}}};y.render=i,y.__scopeId="data-v-352785b2";var b=y},8309:function(e,n,o){var r=o(9781),l=o(3070).f,t=Function.prototype,a=t.toString,u=/^\s*function ([^ (]*)/,i="name";r&&!(i in t)&&l(t,i,{configurable:!0,get:function(){try{return a.call(this).match(u)[1]}catch(e){return""}}})}}]);